\usetheme[progressbar=frametitle,titleformat frame=smallcaps,numbering=counter]{metropolis} 
\useoutertheme[subsection=false]{miniframes} 

%-------------------------------------------------------------------------------------------
%----------------------------------------- Colors ------------------------------------------
%-------------------------------------------------------------------------------------------

%\definecolor{main}{RGB}{22, 74, 116} % Blue UNIPI
\definecolor{main}{RGB}{46, 46, 46} % Grey

% Palette Orange-Blue-Green
\definecolor{color1}{RGB}{222, 134, 57} % Orange
% \definecolor{color2}{RGB}{0, 156, 191} % blue
\definecolor{color2}{RGB}{22, 74, 116} % blue
\definecolor{color3}{RGB}{0, 204, 153} % green

% Palette DarkRed-DarkTeal-Gray
%\definecolor{color1}{RGB}{145, 12, 7} % Dark Red
%\definecolor{color2}{RGB}{45, 129, 131} % Dark Teal
%\definecolor{color3}{RGB}{64, 64, 64} % Gray

% Palette black-red
%\definecolor{color1}{RGB}{0, 0, 0} % Black
%\definecolor{color2}{RGB}{145, 12, 7} % Dark Red
%\definecolor{color3}{RGB}{64, 64, 64} % Gray


\setbeamercolor{progress bar}{fg=color1}
\setbeamercolor{title separator}{fg=color1} 
\setbeamercolor{structure}{fg=black} 
\setbeamercolor{normal text}{fg=black!87} 
\setbeamercolor{alerted text}{fg=color1} 
\setbeamercolor{example text}{fg=color1} 
\setbeamercolor{palette primary}{bg=white, fg=color1} 
\setbeamercolor{palette secondary}{bg=main, fg=white}
\setbeamercolor{palette tertiary}{bg=white, fg=main}
\setbeamercolor{section in toc}{fg=main!40!Black} 
\setbeamercolor{background canvas}{bg=white}


%-------------------------------------------------------------------------------------------
%---------------------------------- Customize Blocks ---------------------------------------
%-------------------------------------------------------------------------------------------

\usepackage{tcolorbox}

\newtcolorbox{mybox}[1][Block:]{
colback=white,
colbacktitle=white,
coltitle=main,
colframe=main,
boxrule=0.7pt,
titlerule=0pt,
arc=10pt,
title=\textbf{\strut#1}
}


\newtcolorbox{myabox}[1][Alerted Block:]{
colback=white,
colbacktitle=white,
coltitle=color1,
colframe=color1,
boxrule=0.7pt,
titlerule=0pt,
arc=10pt,
title=\textbf{\strut#1}
}

\newtcolorbox{myebox}[1][Example Block:]{
colback=white,
colbacktitle=white,
coltitle=color2,
colframe=color2,
boxrule=0.7pt,
titlerule=0pt,
arc=10pt,
title=\textbf{\strut#1}
}

% Footnote
\makeatletter
\def\blfootnote{\xdef\@thefnmark{}\@footnotetext}
\makeatother

% Font Theme
\setbeamerfont{title}{size=\huge}
\usefonttheme[onlymath]{serif}
\setsansfont{Open Sans}

% Frame Title w\ Subtitle
\makeatletter
\defbeamertemplate*{frametitle}{consottotitolo}{%
  \nointerlineskip%
  \begin{beamercolorbox}[%
      wd=\paperwidth,%
      sep=0pt,%
      leftskip=\metropolis@frametitle@padding,%
      rightskip=\metropolis@frametitle@padding,%
    ]{frametitle}%
  \metropolis@frametitlestrut@start%
  \insertframetitle%
  \ifx\insertframesubtitle\empty%
  \else%
    \\[-0.2em]\normalfont{\normalsize\insertframesubtitle}%
  \fi%
  \nolinebreak%
  \metropolis@frametitlestrut@end%
  \end{beamercolorbox}%
}
\makeatother
\setbeamertemplate{frametitle}[consottotitolo]
\addtobeamertemplate{frametitle}{}{%
  \usebeamertemplate*{progress bar in head/foot}
}
