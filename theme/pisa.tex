\usetheme[progressbar=frametitle,titleformat frame=smallcaps,numbering=counter]{metropolis}
\useoutertheme[subsection=false]{miniframes}

% Emoji
\usepackage{emoji}

% Font
\usepackage{inter}

% Bisturi Palette
%\definecolor{main}{RGB}{22, 74, 116} % Blue UNIPI
% \definecolor{main}{RGB}{46, 46, 46} % Grey
\definecolor{main}{RGB}{64, 64, 64} % Grey
\definecolor{color1}{RGB}{66, 133, 244} % Blue
\definecolor{color2}{RGB}{222, 134, 57} % Orange
\definecolor{color3}{RGB}{0, 204, 153} % green

% Colors
\setbeamercolor{progress bar}{fg=color1}
\setbeamercolor{title separator}{fg=color1}
\setbeamercolor{structure}{fg=main}
\setbeamercolor{normal text}{fg=main}
\setbeamercolor{alerted text}{fg=color1}
\setbeamercolor{example text}{fg=color1}
\setbeamercolor{palette primary}{bg=white, fg=color1}
\setbeamercolor{palette secondary}{bg=main, fg=white}
\setbeamercolor{palette tertiary}{bg=white, fg=main}
\setbeamercolor{section in toc}{fg=main}
\setbeamercolor{background canvas}{bg=white}

% Blocks
\usepackage{tcolorbox}

\newtcolorbox{mybox}[1][Block:]{
coltext=main,
colback=white,
colbacktitle=white,
coltitle=main,
colframe=main,
boxrule=0.7pt,
titlerule=0.2pt,
arc=1pt,
title=\textbf{\strut#1}
}

\newtcolorbox{myabox}[1][Alerted Block:]{
coltext=main,
colback=white,
colbacktitle=white,
coltitle=color1,
colframe=color1,
boxrule=0.7pt,
titlerule=0.2pt,
arc=1pt,
title=\textbf{\strut#1}
}

\newtcolorbox{myebox}[1][Example Block:]{
coltext=main,
colback=white,
colbacktitle=white,
coltitle=color2,
colframe=color2,
boxrule=0.7pt,
titlerule=0.2pt,
arc=1pt,
title=\textbf{\strut#1}
}

% Footnote
\makeatletter
\def\blfootnote{\xdef\@thefnmark{}\@footnotetext}
\makeatother

% Font Theme
\setbeamerfont{title}{size=\huge}
\usefonttheme[onlymath]{serif}
\setsansfont{inter}

% Frame Title w\ Subtitle
\makeatletter
\defbeamertemplate*{frametitle}{consottotitolo}{%
  \nointerlineskip%
  \begin{beamercolorbox}[%
      wd=\paperwidth,%
      sep=0pt,%
      leftskip=\metropolis@frametitle@padding,%
      rightskip=\metropolis@frametitle@padding,%
    ]{frametitle}%
  \metropolis@frametitlestrut@start%
  \insertframetitle%
  \ifx\insertframesubtitle\empty%
  \else%
    \\[-0.2em]\normalfont{\normalsize\insertframesubtitle}%
  \fi%
  \nolinebreak%
  \metropolis@frametitlestrut@end%
  \end{beamercolorbox}%
}
\makeatother
\setbeamertemplate{frametitle}[consottotitolo]
\addtobeamertemplate{frametitle}{}{%
  \usebeamertemplate*{progress bar in head/foot}
}

% Logo
\titlegraphic{\vspace{4cm}\hfill\includegraphics[scale=0.21]{theme/light_blue.png}}
